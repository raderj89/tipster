%section.my-properties
  %h2 My Properties
  .all-properties-wrapper
    .all-properties
      = render partial: 'property', collection: current_user.property_relations, locals: { user: current_user }
    .add-building-wrapper.clearfix
      = link_to '#', class: 'js-add-building' do
        %span.circle-wrap
          &#43;
        add a building
      #js-building-search
        = text_field_tag :query, nil, data: { autocomplete_source: properties_path }, id: 'js-property-search-user-show', placeholder: '555 Anywhere St, SomewheresVille, OK', class: 'full-input'
        #js-property-listings

      #js-add-property
        = simple_form_for current_user, remote: true, html: { style: 'display: none;' } do |f|
          = f.simple_fields_for :property_relations, current_user.property_relations.build do |pr|
            %img
            .property-info
              %h5.building_name
              %p.address
            = pr.input :property_id, as: :hidden
            = pr.input :unit, placeholder: "Unit #"
          = f.submit "Add Building"
          = link_to "remove", '#', class: 'js-remove-building'


%section.my-payment
  %h2 My Payment Method
  .payment-information
    - current_user.payment_methods.each do |method|
      %p 
        = method.card_type
        &ndash;
        = method.last_four
      = link_to "edit", '#', class: 'action-link right'

%section.my-tipping
  %h2 My Tipping History
  %table.dashboard-table
    %thead
      %tr
        %th Date
        %th Property
        %th Total
        %th
      %tbody
        = render partial: 'transaction', collection: @transactions, locals: { user: current_user }
  = will_paginate @transactions

